# Licensed to ObjectStyle LLC under one or more
# contributor license agreements. See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ObjectStyle LLC licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

dist: xenial
language: java

jobs:
  include:
    - jdk: openjdk8
      script: mvn clean verify
    - jdk: openjdk11
      script: mvn clean verify -Dt54.skip.tests=true
    - stage: deploy
      jdk: openjdk8
      script: mvn clean source:jar javadoc:javadoc deploy -DskipTests --settings travis_settings.xml
      if: branch IN (master, 1.x) AND type IN (push) AND repo = bootique/bootique-tapestry

# travis encrypt -r bootique/bootique-tapestry "CI_DEPLOY_USERNAME='name'"
# travis encrypt -r bootique/bootique-tapestry "CI_DEPLOY_PASSWORD='password'"
env:
  global:
    - secure: "uWi5pi65PNfDGFQXFJF59WtxrcRjOjrhmM0L7HidAPxLV6sDNc4gvVlUSnrxsqF5coWNAweOh2dUgUDsP1+Zp41vsAXgnLhduKxwPPnv9LY3wbgvGOm1hZ14AtDOn6Jbjh6wn706CqFCA81SV3Ceb0kJyGQoasAYLb+pd1UtcLsFjKWyVqqEcdt033yNv0YAPebj0KDKtZA3sHQY+onG/pRVebkdPu7cHP/l+ZvSdBV0E94dhQKwsYtvsPeL1DJOBxz15zHIidrAJ5L8orhllxlt07lBKEdhwMpuLPogat/5UNAkBz788CBQ30rrPA6Dfc2lEM4oKF7RsNONI0LB0ofAjybzG3ZsXQsw/f/IK4FDHa+krtCw3TF+6bOzvsiFbH+3Gq58uby7hYAiHVQBdOSV/GDjclfsthFzisYTX6DiT+DsZCf1YLpqIwTUK9mCHhBgyHwdYpk9pLMayhD0pnF9D9carIEqdGw8ewMW/FIYxW2Q1/gna/yjIeVEe628fOvMQKM9EdwElNPcqVKLwZV3rbEoWNgc01UI1ylk7+xpHCWiQ/TrguH/PMmCZaHKYdMCJZMbywQwdeVXOJbFyvUC/cNddRQKQWLbbUVpkR0dfiWAzvFrhj4MEq2+e7jgNtSxSRz30+K1j/eYps53PUcQrOiSQCh4zBww/4+hhJI="
    - secure: "MqZhCsIjNEvXo7kJVYI0K0y1qJnxoNbdce7dtlEHBAUksTOn6h8WIB5XjvqnK7IBxB8kaPabPy+tPHXFLZpOVHYoJLdn0l3AwODp3HwPKcshy9uxor8beXAp2l2nEOod0Su8k96wOsohkfLjKryzfVWtCWk2Th4+PUEU3K83lU7mdw4FJUbmS1Z7z9oQDwWVJd4nJ0DvbScVrTMsq8x2N7Tt/uiGFoZxVrGngxaoI/toWm/4dl7sPbZJ3/pkoWB9R5HtHFfzf62D1O6ujI4q/B95K1QOdxDvAItduqqTxjmMYgiWrj/p4XpCeCCMPwFzAS3XtrEEiDFXuFI2j6Mb4wh2xQW4X9gA8qSHu1R6DrWG42xkwYZfnOGzNDnxZU1C+eMIvy8i8S08vZJNgOm20N2mWfNulIuQm9B00TICidpOm2Z52iWJ2rp7vMx+C1CFYfL53XntA3bGg/o9+YUWd7vUkZWZw4Cq6Dba+SDR01PWhUpgYohIzPEo3vH79QSlGfLH7w4RPbB/5ftEKjIvRbwpEDJ3kjd9cJEY5CDfsZHGCfJhTMlOMjeICsqtKWij5g46KIUshLw9tPmwHggLxXQQtBbtpmyF+VUxDeuCGNoCgiqwZb54pa+COPhLtlHSTPvV60gb+WTfrhQscr+5LWFlLBK7Mvgzi1SfWpUOP4o="
